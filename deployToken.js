//
// set var values _tokenName, initialSupply, _symbol
// geth console
// loadScript(<path>/deployToken.js)
// execute: deployToken()
//
var _tokenName = "Wow4Token" /* var of type string here */ ;
var initialSupply = 10000000 /* var of type uint256 here */ ;
var decimalUnits = 2 /* var of type uint8 here (initialSupply = 10000000, decmalUnits = 2 : 100000.00) */ ;
var _symbol = "Wow4" /* var of type string here */ ;

// web3.sha3('setTokenContract(address)')  first 4 byte
var _funcIdSetTokenContract = web3.sha3('setTokenContract(address)').slice(0, 10)

// deployToken()


// OwnerValidator
function deployOwnerValidator() {
   console.log("deploy OwnerValidator");
   var ownervalidatorimplContract = web3.eth.contract([{"constant":true,"inputs":[{"name":"","type":"uint256"}],"name":"owners","outputs":[{"name":"","type":"address"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"isWorking","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"addr","type":"address"}],"name":"removeOwner","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"addr","type":"address"}],"name":"validate","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"tokenContract","outputs":[{"name":"","type":"address"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_isWorking","type":"bool"}],"name":"setWorking","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"addr","type":"address"}],"name":"addOwner","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"sendFromOwn","outputs":[{"name":"success","type":"bool"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"getOwners","outputs":[{"name":"","type":"address[]"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"addr","type":"address"}],"name":"ownerValidate","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFromSender","outputs":[{"name":"success","type":"bool"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_tokenContract","type":"address"}],"name":"setTokenContract","outputs":[],"payable":false,"type":"function"},{"inputs":[],"payable":false,"type":"constructor"}]);
   var ownervalidatorimpl = ownervalidatorimplContract.new(
      {
        from: web3.eth.accounts[0], 
        data: '6060604052341561000c57fe5b5b5b6001600060006101000a81548160ff0219169083151502179055505b6001805480600101828161003e9190610094565b916000526020600020900160005b33909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550505b6100e5565b8154818355818115116100bb578183600052602060002091820191016100ba91906100c0565b5b505050565b6100e291905b808211156100de5760008160009055506001016100c6565b5090565b90565b6109e4806100f46000396000f300606060405236156100b8576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff168063025e7c27146100ba578063099aea0a1461011a578063173825d914610144578063207c64fb1461017a57806355a373d6146101c85780636fb3ba9e1461021a5780637065cb481461023c5780637e62166714610272578063a0e67e2b146102c9578063b43545bb1461033e578063bae804a71461038c578063bbcd5bbe146103e3575bfe5b34156100c257fe5b6100d86004808035906020019091905050610419565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b341561012257fe5b61012a610459565b604051808215151515815260200191505060405180910390f35b341561014c57fe5b610178600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190505061046c565b005b341561018257fe5b6101ae600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050610512565b604051808215151515815260200191505060405180910390f35b34156101d057fe5b6101d8610529565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b341561022257fe5b61023a6004808035151590602001909190505061054f565b005b341561024457fe5b610270600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050610583565b005b341561027a57fe5b6102af600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050610627565b604051808215151515815260200191505060405180910390f35b34156102d157fe5b6102d961068d565b604051808060200182810382528381815181526020019150805190602001906020028083836000831461032b575b80518252602083111561032b57602082019150602081019050602083039250610307565b5050509050019250505060405180910390f35b341561034657fe5b610372600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050610722565b604051808215151515815260200191505060405180910390f35b341561039457fe5b6103c9600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050610735565b604051808215151515815260200191505060405180910390f35b34156103eb57fe5b610417600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050610836565b005b60018181548110151561042857fe5b906000526020600020900160005b915054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600060009054906101000a900460ff1681565b6000600060009054906101000a900460ff16151561048a5760006000fd5b61049333610512565b1561050c576104a1826108a7565b9050600081111561050b5760006001600183038154811015156104c057fe5b906000526020600020900160005b6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505b5b5b5b5050565b6000600061051f836108a7565b141590505b919050565b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b61055833610722565b15156105645760006000fd5b80600060006101000a81548160ff0219169083151502179055505b5b50565b600060009054906101000a900460ff16151561059f5760006000fd5b6105a833610512565b15610622576105b681610512565b151561062157600180548060010182816105d09190610953565b916000526020600020900160005b83909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550505b5b5b5b50565b600061063233610512565b151561063e5760006000fd5b8273ffffffffffffffffffffffffffffffffffffffff166108fc839081150290604051809050600060405180830381858888f1935050505015156106825760006000fd5b600190505b92915050565b61069561097f565b600180548060200260200160405190810160405280929190818152602001828054801561071757602002820191906000526020600020905b8160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190600101908083116106cd575b505050505090505b90565b600061072d82610512565b90505b919050565b600061074033610512565b151561074c5760006000fd5b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663bae804a784846000604051602001526040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200182815260200192505050602060405180830381600087803b151561081657fe5b60325a03f1151561082357fe5b5050506040518051905090505b92915050565b600060009054906101000a900460ff1615156108525760006000fd5b61085b33610512565b156108a25780600260006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505b5b5b50565b6000600060009150600090505b600180549050811015610949578273ffffffffffffffffffffffffffffffffffffffff166001828154811015156108e757fe5b906000526020600020900160005b9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16141561093b57600181019150610949565b5b80806001019150506108b4565b8191505b50919050565b81548183558181151161097a578183600052602060002091820191016109799190610993565b5b505050565b602060405190810160405280600081525090565b6109b591905b808211156109b1576000816000905550600101610999565b5090565b905600a165627a7a723058206e74f7c28c7fe6d97164d766486ba43018dc5c32741b1fb2ffe3b3cee1b6e6d80029', 
        gas: 3000000
      }, function(e, contract){
       console.log(e, contract);
       if (typeof contract.address != 'undefined') {
            console.log('OwnerValidator Contract mined! address: ' + contract.address + ' transactionHash: ' + contract.transactionHash);
            deployOffChainManager(contract.address);
       }
    })
    console.log("wait for mining OwnerValidator");
}
 
 
// OffChainManager
function deployOffChainManager(_ownerValidator) {
   console.log("deploy OffChainManager");
   var _rootAddress = web3.eth.accounts[0];
   var offchainmanagerimplContract = web3.eth.contract([{"constant":true,"inputs":[],"name":"isWorking","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_address","type":"address"}],"name":"setRootAddress","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"addr","type":"address"}],"name":"isToOffChainAddress","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"getOffChainAddresses","outputs":[{"name":"","type":"address[]"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint256"}],"name":"offChainAddreses","outputs":[{"name":"","type":"address"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"tokenContract","outputs":[{"name":"","type":"address"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"getOffChainRootAddress","outputs":[{"name":"","type":"address"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_ownerValidator","type":"address"}],"name":"setOwnerValidatorAddress","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_isWorking","type":"bool"}],"name":"setWorking","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_addresses","type":"address[]"}],"name":"addOffChainAddresses","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"sendFromOwn","outputs":[{"name":"success","type":"bool"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"rootAddress","outputs":[{"name":"","type":"address"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"addr","type":"address"}],"name":"ownerValidate","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFromSender","outputs":[{"name":"success","type":"bool"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_tokenContract","type":"address"}],"name":"setTokenContract","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_addresses","type":"address[]"}],"name":"removeOffChainAddresses","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"ownerValidator","outputs":[{"name":"","type":"address"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"offChainAddresesValidCount","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"_addresses","type":"address[]"}],"name":"isToOffChainAddresses","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function"},{"inputs":[{"name":"_rootAddress","type":"address"},{"name":"_ownerValidator","type":"address"}],"payable":false,"type":"constructor"}]);
   var offchainmanagerimpl = offchainmanagerimplContract.new(
      _rootAddress,
      _ownerValidator,
      {
        from: web3.eth.accounts[0], 
        data: '6060604052341561000c57fe5b6040516040806116d0833981016040528080519060200190919080519060200190919050505b5b6001600060006101000a81548160ff0219169083151502179055505b81600060016101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555080600360006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505b50505b6115ec806100e46000396000f30060606040523615610105576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff168063099aea0a146101075780631451952b146101315780633a8468f7146101675780633f67a94e146101b55780634cf1c8ef1461022a57806355a373d61461028a5780635d6af2af146102dc5780635ddf29981461032e5780636fb3ba9e1461036457806371868032146103865780637e621667146103dd578063aaa2b8c814610434578063b43545bb14610486578063bae804a7146104d4578063bbcd5bbe1461052b578063c0be3e9a14610561578063d2d5a55c146105b8578063dac9882a1461060a578063fceb985214610630575bfe5b341561010f57fe5b61011761069f565b604051808215151515815260200191505060405180910390f35b341561013957fe5b610165600480803573ffffffffffffffffffffffffffffffffffffffff169060200190919050506106b2565b005b341561016f57fe5b61019b600480803573ffffffffffffffffffffffffffffffffffffffff169060200190919050506107f3565b604051808215151515815260200191505060405180910390f35b34156101bd57fe5b6101c5610840565b6040518080602001828103825283818151815260200191508051906020019060200280838360008314610217575b805182526020831115610217576020820191506020810190506020830392506101f3565b5050509050019250505060405180910390f35b341561023257fe5b61024860048080359060200190919050506108d5565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b341561029257fe5b61029a610915565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34156102e457fe5b6102ec61093b565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b341561033657fe5b610362600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050610966565b005b341561036c57fe5b61038460048080351515906020019091905050610aa7565b005b341561038e57fe5b6103db600480803590602001908201803590602001908080602002602001604051908101604052809392919081815260200183836020028082843782019150505050505091905050610adb565b005b34156103e557fe5b61041a600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050610c1a565b604051808215151515815260200191505060405180910390f35b341561043c57fe5b610444610d50565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b341561048e57fe5b6104ba600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050610d76565b604051808215151515815260200191505060405180910390f35b34156104dc57fe5b610511600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050610e59565b604051808215151515815260200191505060405180910390f35b341561053357fe5b61055f600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190505061102a565b005b341561056957fe5b6105b660048080359060200190820180359060200190808060200260200160405190810160405280939291908181526020018383602002808284378201915050505050509190505061114e565b005b34156105c057fe5b6105c861128d565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b341561061257fe5b61061a6112b3565b6040518082815260200191505060405180910390f35b341561063857fe5b61068560048080359060200190820180359060200190808060200260200160405190810160405280939291908181526020018383602002808284378201915050505050509190505061134a565b604051808215151515815260200191505060405180910390f35b600060009054906101000a900460ff1681565b600060009054906101000a900460ff1615156106ce5760006000fd5b600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663207c64fb336000604051602001526040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b151561079057fe5b60325a03f1151561079d57fe5b50505060405180519050156107ee5780600060016101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505b5b5b50565b60006000600260008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020541190505b919050565b61084861155b565b60018054806020026020016040519081016040528092919081815260200182805480156108ca57602002820191906000526020600020905b8160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019060010190808311610880575b505050505090505b90565b6001818154811015156108e457fe5b906000526020600020900160005b915054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6000600060019054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690505b90565b600060009054906101000a900460ff1615156109825760006000fd5b600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663207c64fb336000604051602001526040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b1515610a4457fe5b60325a03f11515610a5157fe5b5050506040518051905015610aa25780600360006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505b5b5b50565b610ab033610d76565b1515610abc5760006000fd5b80600060006101000a81548160ff0219169083151502179055505b5b50565b6000600060009054906101000a900460ff161515610af95760006000fd5b600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663207c64fb336000604051602001526040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b1515610bbb57fe5b60325a03f11515610bc857fe5b5050506040518051905015610c1457600090505b8151811015610c1357610c058282815181101515610bf657fe5b906020019060200201516113a4565b5b8080600101915050610bdc565b5b5b5b5050565b6000600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663207c64fb336000604051602001526040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b1515610cde57fe5b60325a03f11515610ceb57fe5b505050604051805190501515610d015760006000fd5b8273ffffffffffffffffffffffffffffffffffffffff166108fc839081150290604051809050600060405180830381858888f193505050501515610d455760006000fd5b600190505b92915050565b600060019054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6000600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663207c64fb836000604051602001526040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b1515610e3a57fe5b60325a03f11515610e4757fe5b5050506040518051905090505b919050565b6000600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663207c64fb336000604051602001526040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b1515610f1d57fe5b60325a03f11515610f2a57fe5b505050604051805190501515610f405760006000fd5b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663bae804a784846000604051602001526040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200182815260200192505050602060405180830381600087803b151561100a57fe5b60325a03f1151561101757fe5b5050506040518051905090505b92915050565b600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663207c64fb336000604051602001526040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b15156110ec57fe5b60325a03f115156110f957fe5b505050604051805190501561114a5780600460006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505b5b50565b6000600060009054906101000a900460ff16151561116c5760006000fd5b600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663207c64fb336000604051602001526040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b151561122e57fe5b60325a03f1151561123b57fe5b505050604051805190501561128757600090505b815181101561128657611278828281518110151561126957fe5b90602001906020020151611465565b5b808060010191505061124f565b5b5b5b5050565b600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60006000600060009150600090505b6001805490508110156113415760006001828154811015156112e057fe5b906000526020600020900160005b9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161415156113335781806001019250505b5b80806001019150506112c2565b8192505b505090565b60006000600090505b82518110156113995761137c838281518110151561136d57fe5b906020019060200201516107f3565b151561138b576000915061139e565b5b8080600101915050611353565b600191505b50919050565b6113ad816107f3565b151561146157600180548060010182816113c7919061156f565b916000526020600020900160005b83909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050600180549050600260008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055505b5b50565b6000600260008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905060008111156115565760006001600183038154811015156114c657fe5b906000526020600020900160005b6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506000600260008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055505b5b5050565b602060405190810160405280600081525090565b81548183558181151161159657818360005260206000209182019101611595919061159b565b5b505050565b6115bd91905b808211156115b95760008160009055506001016115a1565b5090565b905600a165627a7a7230582063f1ceb98d1a0cace03aaa28b47db0dfe210f20d918feacac55e93c500e1a77b0029', 
        gas: 3000000
      }, function(e, contract){
       console.log(e, contract);
       if (typeof contract.address != 'undefined') {
            console.log('OffChainManager Contract mined! address: ' + contract.address + ' transactionHash: ' + contract.transactionHash);
            deployTokenContract(_ownerValidator, contract.address);
       }
    })
    console.log("wait for mining OffChainManager");
}

// TokenContract
function deployTokenContract(_ownerValidator, _offChainManager) {
   console.log("deploy TokenContract");
   var tokencontractimplContract = web3.eth.contract([{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"success","type":"bool"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"isWorking","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"totalSupply","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"redenominatedBalances","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"decimalUnits","outputs":[{"name":"decimalUnits","type":"uint8"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"success","type":"bool"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"balances","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_offChainManager","type":"address"}],"name":"setOffChainManagerAddress","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"applyRedenomination","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"offChainManager","outputs":[{"name":"","type":"address"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"standard","outputs":[{"name":"","type":"string"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"isRedenominated","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"},{"name":"","type":"address"}],"name":"redenominatedAllowed","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"},{"name":"","type":"address"}],"name":"allowed","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_ownerValidator","type":"address"}],"name":"setOwnerValidatorAddress","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"redenomiValue","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_isWorking","type":"bool"}],"name":"setWorking","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"sendFromOwn","outputs":[{"name":"success","type":"bool"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"success","type":"bool"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"addr","type":"address"}],"name":"ownerValidate","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFromSender","outputs":[{"name":"success","type":"bool"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_redenomiValue","type":"uint256"}],"name":"redenominate","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"ownerValidator","outputs":[{"name":"","type":"address"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"remaining","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFromOwn","outputs":[{"name":"success","type":"bool"}],"payable":false,"type":"function"},{"inputs":[{"name":"initialSupply","type":"uint256"},{"name":"decimalUnits","type":"uint8"},{"name":"_ownerValidator","type":"address"},{"name":"_offChainManager","type":"address"}],"payable":false,"type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_from","type":"address"},{"indexed":true,"name":"_to","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"TransferFromSender","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_from","type":"address"},{"indexed":true,"name":"_toKey","type":"address"},{"indexed":false,"name":"_to","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"ToOffChainTransfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"_owner","type":"address"},{"indexed":false,"name":"_isRedenominated","type":"bool"},{"indexed":false,"name":"_redenomiVakye","type":"uint256"}],"name":"Redenominate","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"_owner","type":"address"},{"indexed":false,"name":"_isRedenominated","type":"bool"},{"indexed":false,"name":"_redenomiVakye","type":"uint256"}],"name":"ApplyRedenomination","type":"event"}]);
   var tokencontractimpl = tokencontractimplContract.new(
      initialSupply,
      decimalUnits,
      _ownerValidator,
      _offChainManager,
      {
        from: web3.eth.accounts[0], 
        data: '6060604052604060405190810160405280600981526020017f546f6b656e20302e3100000000000000000000000000000000000000000000008152506001908051906020019062000052929190620001a5565b5034156200005c57fe5b604051608080620029bf833981016040528080519060200190919080519060200190919080519060200190919080519060200190919050505b5b6001600060006101000a81548160ff0219169083151502179055505b83600460003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508360028190555082600360006101000a81548160ff021916908360ff16021790555081600660006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555080600760006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505b5050505062000254565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10620001e857805160ff191683800117855562000219565b8280016001018555821562000219579182015b8281111562000218578251825591602001919060010190620001fb565b5b5090506200022891906200022c565b5090565b6200025191905b808211156200024d57600081600090555060010162000233565b5090565b90565b61275b80620002646000396000f30060606040523615610152576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff168063095ea7b314610154578063099aea0a146101ab57806318160ddd146101d557806319ee6e0d146101fb5780631caba41f1461024557806323b872dd1461027157806327e235e3146102e757806337d1eb351461033157806348ff6525146103675780634acd44db146103795780635a3b7e42146103cb5780635aab25b6146104645780635c12ac481461048e5780635c658165146104f75780635ddf299814610560578063663c920a146105965780636fb3ba9e146105bc57806370a08231146105de5780637e62166714610628578063a9059cbb1461067f578063b43545bb146106d6578063bae804a714610724578063ca2156bd1461077b578063d2d5a55c1461079b578063dd62ed3e146107ed578063e00a7fc514610856575bfe5b341561015c57fe5b610191600480803573ffffffffffffffffffffffffffffffffffffffff169060200190919080359060200190919050506108ad565b604051808215151515815260200191505060405180910390f35b34156101b357fe5b6101bb6108e2565b604051808215151515815260200191505060405180910390f35b34156101dd57fe5b6101e56108f5565b6040518082815260200191505060405180910390f35b341561020357fe5b61022f600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050610927565b6040518082815260200191505060405180910390f35b341561024d57fe5b61025561093f565b604051808260ff1660ff16815260200191505060405180910390f35b341561027957fe5b6102cd600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050610957565b604051808215151515815260200191505060405180910390f35b34156102ef57fe5b61031b600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050610c19565b6040518082815260200191505060405180910390f35b341561033957fe5b610365600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050610c31565b005b341561036f57fe5b610377610d72565b005b341561038157fe5b610389610f3f565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34156103d357fe5b6103db610f65565b604051808060200182810382528381815181526020019150805190602001908083836000831461042a575b80518252602083111561042a57602082019150602081019050602083039250610406565b505050905090810190601f1680156104565780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b341561046c57fe5b610474611003565b604051808215151515815260200191505060405180910390f35b341561049657fe5b6104e1600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050611016565b6040518082815260200191505060405180910390f35b34156104ff57fe5b61054a600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803573ffffffffffffffffffffffffffffffffffffffff1690602001909190505061103b565b6040518082815260200191505060405180910390f35b341561056857fe5b610594600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050611060565b005b341561059e57fe5b6105a66111a1565b6040518082815260200191505060405180910390f35b34156105c457fe5b6105dc600480803515159060200190919050506111a7565b005b34156105e657fe5b610612600480803573ffffffffffffffffffffffffffffffffffffffff169060200190919050506111db565b6040518082815260200191505060405180910390f35b341561063057fe5b610665600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050611318565b604051808215151515815260200191505060405180910390f35b341561068757fe5b6106bc600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803590602001909190505061144e565b604051808215151515815260200191505060405180910390f35b34156106de57fe5b61070a600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050611481565b604051808215151515815260200191505060405180910390f35b341561072c57fe5b610761600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050611564565b604051808215151515815260200191505060405180910390f35b341561078357fe5b610799600480803590602001909190505061160a565b005b34156107a357fe5b6107ab611797565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34156107f557fe5b610840600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803573ffffffffffffffffffffffffffffffffffffffff169060200190919050506117bd565b6040518082815260200191505060405180910390f35b341561085e57fe5b610893600480803573ffffffffffffffffffffffffffffffffffffffff169060200190919080359060200190919050506119ef565b604051808215151515815260200191505060405180910390f35b6000600060009054906101000a900460ff1615156108cb5760006000fd5b6108d6328484611b7a565b600190505b5b92915050565b600060009054906101000a900460ff1681565b6000600760149054906101000a900460ff161561091e57610917600254611c9d565b9050610924565b60025490505b90565b60096020528060005260406000206000915090505481565b6000600360009054906101000a900460ff1690505b90565b6000600060009054906101000a900460ff1615156109755760006000fd5b8161097f856111db565b101561098b5760006000fd5b610994836111db565b8261099e856111db565b0110156109ab5760006000fd5b6109b584326117bd565b8211156109c25760006000fd5b6109cc8483611cac565b600760009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16633a8468f7846000604051602001526040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b1515610a8e57fe5b60325a03f11515610a9b57fe5b5050506040518051905015610bf657610b58600760009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16635d6af2af6000604051602001526040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401809050602060405180830381600087803b1515610b3b57fe5b60325a03f11515610b4857fe5b5050506040518051905083611ec8565b8273ffffffffffffffffffffffffffffffffffffffff163273ffffffffffffffffffffffffffffffffffffffff167fac451bbc3f5cfd4d025f61c9735329e50667c878b87156c51cd3fbe1f8b7ca018585604051808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390a3610c01565b610c008383611ec8565b5b610c0c843284612104565b600190505b5b9392505050565b60046020528060005260406000206000915090505481565b600060009054906101000a900460ff161515610c4d5760006000fd5b600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663207c64fb336000604051602001526040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b1515610d0f57fe5b60325a03f11515610d1c57fe5b5050506040518051905015610d6d5780600760006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505b5b5b50565b600060009054906101000a900460ff1615610d8d5760006000fd5b600760149054906101000a900460ff1615610da85760006000fd5b60006008541415610db95760006000fd5b600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663207c64fb336000604051602001526040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b1515610e7b57fe5b60325a03f11515610e8857fe5b5050506040518051905015610f3b576001600760146101000a81548160ff0219169083151502179055507f372f3246eab842fbf9d2b5af970e343780b9c940b1f2b65990d391b889056cb833600760149054906101000a900460ff16600854604051808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200183151515158152602001828152602001935050505060405180910390a15b5b5b565b600760009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610ffb5780601f10610fd057610100808354040283529160200191610ffb565b820191906000526020600020905b815481529060010190602001808311610fde57829003601f168201915b505050505081565b600760149054906101000a900460ff1681565b600a602052816000526040600020602052806000526040600020600091509150505481565b6005602052816000526040600020602052806000526040600020600091509150505481565b600060009054906101000a900460ff16151561107c5760006000fd5b600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663207c64fb336000604051602001526040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b151561113e57fe5b60325a03f1151561114b57fe5b505050604051805190501561119c5780600660006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505b5b5b50565b60085481565b6111b033611481565b15156111bc5760006000fd5b80600060006101000a81548160ff0219169083151502179055505b5b50565b6000600760149054906101000a900460ff16156112d0576000600960008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054111561128157600960008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050611313565b6112c9600460008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054611c9d565b9050611313565b600460008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205490505b919050565b6000600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663207c64fb336000604051602001526040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b15156113dc57fe5b60325a03f115156113e957fe5b5050506040518051905015156113ff5760006000fd5b8273ffffffffffffffffffffffffffffffffffffffff166108fc839081150290604051809050600060405180830381858888f1935050505015156114435760006000fd5b600190505b92915050565b6000600060009054906101000a900460ff16151561146c5760006000fd5b6114773284846124cc565b90505b5b92915050565b6000600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663207c64fb836000604051602001526040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b151561154557fe5b60325a03f1151561155257fe5b5050506040518051905090505b919050565b6000600060009054906101000a900460ff1615156115825760006000fd5b61158d3384846124cc565b15156115995760006000fd5b8273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f2f7e3a4f4ae3263e5fd17399f105086509839000e8c774a5aca6ddcc7bdbff6e846040518082815260200191505060405180910390a3600190505b5b92915050565b600760149054906101000a900460ff16156116255760006000fd5b600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663207c64fb336000604051602001526040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b15156116e757fe5b60325a03f115156116f457fe5b505050604051805190501561179357806008819055507f65a50d4921ba3792799a41bb9c6503f7b120367163d9ff055ce912de431e688d33600760149054906101000a900460ff16600854604051808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200183151515158152602001828152602001935050505060405180910390a15b5b50565b600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6000600760149054906101000a900460ff1615611969576000600a60008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205411156118dd57600a60008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205490506119e9565b611962600560008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054611c9d565b90506119e9565b600560008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205490505b92915050565b6000600060009054906101000a900460ff161515611a0d5760006000fd5b600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663207c64fb336000604051602001526040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b1515611acf57fe5b60325a03f11515611adc57fe5b505050604051805190501515611af25760006000fd5b611afd3084846124cc565b1515611b095760006000fd5b8273ffffffffffffffffffffffffffffffffffffffff163073ffffffffffffffffffffffffffffffffffffffff167f2f7e3a4f4ae3263e5fd17399f105086509839000e8c774a5aca6ddcc7bdbff6e846040518082815260200191505060405180910390a3600190505b5b92915050565b600760149054906101000a900460ff1615611c155780600a60008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550611c97565b80600560008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055505b5b505050565b6000600854820290505b919050565b600760149054906101000a900460ff1615611e75576000600960008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020541415611e23576000600460008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020541115611e2257611d99600460008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054611c9d565b600960008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055506000600460008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055505b5b80600960008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282540392505081905550611ec3565b80600460008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825403925050819055505b5b5050565b611ed1826111db565b81611edb846111db565b011015611ee85760006000fd5b600760149054906101000a900460ff16156120b1576000600960008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054141561205f576000600460008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054111561205e57611fd5600460008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054611c9d565b600960008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055506000600460008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055505b5b80600960008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055506120ff565b80600460008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055505b5b5050565b600760149054906101000a900460ff161561243b576000600a60008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205414156123ac576000600560008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205411156123ab576122a8600560008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054611c9d565b600a60008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055506000600560008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055505b5b80600a60008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825403925050819055506124c6565b80600560008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825403925050819055505b5b505050565b6000816124d8856111db565b10156124e45760006000fd5b6124ee8483611cac565b600760009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16633a8468f7846000604051602001526040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b15156125b057fe5b60325a03f115156125bd57fe5b50505060405180519050156127185761267a600760009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16635d6af2af6000604051602001526040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401809050602060405180830381600087803b151561265d57fe5b60325a03f1151561266a57fe5b5050506040518051905083611ec8565b8273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fac451bbc3f5cfd4d025f61c9735329e50667c878b87156c51cd3fbe1f8b7ca018585604051808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390a3612723565b6127228383611ec8565b5b600190505b93925050505600a165627a7a723058209c28744759efbedae2bfe7fd964ba799736e632bbd27dff1f98b3347a7fb2cda0029', 
        gas: 3000000
      }, function(e, contract){
       console.log(e, contract);
       if (typeof contract.address != 'undefined') {
            console.log('TokenContract Contract mined! address: ' + contract.address + ' transactionHash: ' + contract.transactionHash);
            deployMainContract(_ownerValidator, _offChainManager, contract.address);
            setTokenContract(_ownerValidator, contract.address, "OwnerValidator");
            setTokenContract(_offChainManager, contract.address, "OffChainManager");
       }
    })
    console.log("wait for mining TokenContract");
}

// MainContract
function deployMainContract(_ownerValidator, _tokenContract, _tokenContract) {
   console.log("deploy MainContract");
   var maincontractContract = web3.eth.contract([{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"success","type":"bool"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"totalSupply","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"decimalUnits","outputs":[{"name":"decimalUnits","type":"uint8"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"success","type":"bool"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_ownerValidator","type":"address"}],"name":"setOwnerValidateAddress","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"tokenContract","outputs":[{"name":"","type":"address"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"standard","outputs":[{"name":"","type":"string"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"sendFromOwn","outputs":[{"name":"success","type":"bool"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"success","type":"bool"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFromSender","outputs":[{"name":"success","type":"bool"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"_tokenContract","type":"address"}],"name":"setTokenContract","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"ownerValidator","outputs":[{"name":"","type":"address"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"remaining","type":"uint256"}],"payable":false,"type":"function"},{"inputs":[{"name":"_tokenName","type":"string"},{"name":"_ownerValidator","type":"address"},{"name":"_tokenContract","type":"address"},{"name":"_symbol","type":"string"}],"payable":false,"type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_from","type":"address"},{"indexed":true,"name":"_to","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_owner","type":"address"},{"indexed":true,"name":"_spender","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"Approval","type":"event"}]);
   var maincontract = maincontractContract.new(
      _tokenName,
      _ownerValidator,
      _tokenContract,
      _symbol,
      {
        from: web3.eth.accounts[0], 
        data: '6060604052604060405190810160405280600981526020017f546f6b656e20302e310000000000000000000000000000000000000000000000815250600090805190602001906200005292919062000155565b5034156200005c57fe5b6040516200180038038062001800833981016040528080518201919060200180519060200190919080519060200190919080518201919050505b82600360006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555081600460006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555083600190805190602001906200013092919062000155565b5080600290805190602001906200014992919062000155565b505b5050505062000204565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106200019857805160ff1916838001178555620001c9565b82800160010185558215620001c9579182015b82811115620001c8578251825591602001919060010190620001ab565b5b509050620001d89190620001dc565b5090565b6200020191905b80821115620001fd576000816000905550600101620001e3565b5090565b90565b6115ec80620002146000396000f300606060405236156100e4576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806306fdde03146100e6578063095ea7b31461017f57806318160ddd146101d65780631caba41f146101fc57806323b872dd1461022857806350e86e1e1461029e57806355a373d6146102d45780635a3b7e421461032657806370a08231146103bf5780637e6216671461040957806395d89b4114610460578063a9059cbb146104f9578063bae804a714610550578063bbcd5bbe146105a7578063d2d5a55c146105dd578063dd62ed3e1461062f575bfe5b34156100ee57fe5b6100f6610698565b6040518080602001828103825283818151815260200191508051906020019080838360008314610145575b80518252602083111561014557602082019150602081019050602083039250610121565b505050905090810190601f1680156101715780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b341561018757fe5b6101bc600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050610736565b604051808215151515815260200191505060405180910390f35b34156101de57fe5b6101e6610899565b6040518082815260200191505060405180910390f35b341561020457fe5b61020c610946565b604051808260ff1660ff16815260200191505060405180910390f35b341561023057fe5b610284600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803573ffffffffffffffffffffffffffffffffffffffff169060200190919080359060200190919050506109f3565b604051808215151515815260200191505060405180910390f35b34156102a657fe5b6102d2600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050610b8b565b005b34156102dc57fe5b6102e4610caf565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b341561032e57fe5b610336610cd5565b6040518080602001828103825283818151815260200191508051906020019080838360008314610385575b80518252602083111561038557602082019150602081019050602083039250610361565b505050905090810190601f1680156103b15780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34156103c757fe5b6103f3600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050610d73565b6040518082815260200191505060405180910390f35b341561041157fe5b610446600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050610e56565b604051808215151515815260200191505060405180910390f35b341561046857fe5b610470610f8c565b60405180806020018281038252838181518152602001915080519060200190808383600083146104bf575b8051825260208311156104bf5760208201915060208101905060208303925061049b565b505050905090810190601f1680156104eb5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b341561050157fe5b610536600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803590602001909190505061102a565b604051808215151515815260200191505060405180910390f35b341561055857fe5b61058d600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803590602001909190505061118d565b604051808215151515815260200191505060405180910390f35b34156105af57fe5b6105db600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190505061135e565b005b34156105e557fe5b6105ed611482565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b341561063757fe5b610682600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803573ffffffffffffffffffffffffffffffffffffffff169060200190919050506114a8565b6040518082815260200191505060405180910390f35b60018054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561072e5780601f106107035761010080835404028352916020019161072e565b820191906000526020600020905b81548152906001019060200180831161071157829003601f168201915b505050505081565b6000600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663095ea7b384846000604051602001526040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200182815260200192505050602060405180830381600087803b151561080257fe5b60325a03f1151561080f57fe5b505050604051805190501561088c578273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925846040518082815260200191505060405180910390a360019050610893565b60006000fd5b5b92915050565b6000600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166318160ddd6000604051602001526040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401809050602060405180830381600087803b151561092957fe5b60325a03f1151561093657fe5b5050506040518051905090505b90565b6000600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16631caba41f6000604051602001526040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401809050602060405180830381600087803b15156109d657fe5b60325a03f115156109e357fe5b5050506040518051905090505b90565b6000600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166323b872dd8585856000604051602001526040518463ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019350505050602060405180830381600087803b1515610af357fe5b60325a03f11515610b0057fe5b5050506040518051905015610b7d578273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef846040518082815260200191505060405180910390a360019050610b84565b60006000fd5b5b9392505050565b600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663207c64fb336000604051602001526040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b1515610c4d57fe5b60325a03f11515610c5a57fe5b5050506040518051905015610cab5780600360006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505b5b50565b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60008054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610d6b5780601f10610d4057610100808354040283529160200191610d6b565b820191906000526020600020905b815481529060010190602001808311610d4e57829003601f168201915b505050505081565b6000600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166370a08231836000604051602001526040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b1515610e3757fe5b60325a03f11515610e4457fe5b5050506040518051905090505b919050565b6000600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663207c64fb336000604051602001526040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b1515610f1a57fe5b60325a03f11515610f2757fe5b505050604051805190501515610f3d5760006000fd5b8273ffffffffffffffffffffffffffffffffffffffff166108fc839081150290604051809050600060405180830381858888f193505050501515610f815760006000fd5b600190505b92915050565b60028054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156110225780601f10610ff757610100808354040283529160200191611022565b820191906000526020600020905b81548152906001019060200180831161100557829003601f168201915b505050505081565b6000600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663a9059cbb84846000604051602001526040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200182815260200192505050602060405180830381600087803b15156110f657fe5b60325a03f1151561110357fe5b5050506040518051905015611180578273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef846040518082815260200191505060405180910390a360019050611187565b60006000fd5b5b92915050565b6000600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663207c64fb336000604051602001526040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b151561125157fe5b60325a03f1151561125e57fe5b5050506040518051905015156112745760006000fd5b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663bae804a784846000604051602001526040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200182815260200192505050602060405180830381600087803b151561133e57fe5b60325a03f1151561134b57fe5b5050506040518051905090505b92915050565b600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663207c64fb336000604051602001526040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b151561142057fe5b60325a03f1151561142d57fe5b505050604051805190501561147e5780600460006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505b5b50565b600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6000600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663dd62ed3e84846000604051602001526040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200192505050602060405180830381600087803b15156115a057fe5b60325a03f115156115ad57fe5b5050506040518051905090505b929150505600a165627a7a72305820059e8c8e325da98880cc2daf5b88db52c7826655cf5c35af9cec0a453c73b3740029', 
        gas: 3000000
      }, function(e, contract){
       console.log(e, contract);
       if (typeof contract.address != 'undefined') {
            console.log('MainContract Contract mined! address: ' + contract.address + ' transactionHash: ' + contract.transactionHash);
       }
    })
    console.log("wait for mining MainContract");
}

// setTokenContract 
function setTokenContract(_contract, _tokenContract, contractName) {

   console.log("setTokenContract " + contractName);

   // funcId(setTokenContract) + tokenContract-address
   var code = _funcIdSetTokenContract.slice(2) + "00000000000000000000000000" + _tokenContract.slice(2)

   web3.eth.sendTransaction({from: web3.eth.accounts[0], to: _contract, data: code}, function(err, transactionHash) {
     if (!err) {
         console.log('contract.setTokenContract transactionHash: ' + transactionHash);
      } else {
         console.log(err);
      }
   });
    console.log("wait for mining setTokenContract " + contractName);
}

function deployToken() {
   deployOwnerValidator();
}
 